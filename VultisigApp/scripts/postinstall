#!/bin/bash

# System-wide LaunchAgent
SYS_PLIST="/Library/LaunchAgents/com.vultisig.setenv.plist"
# User-specific LaunchAgent
USER_PLIST="$HOME/Library/LaunchAgents/com.vultisig.setenv.plist"

# Function to load a LaunchAgent plist
load_plist() {
    local plist="$1"
    if [ -f "$plist" ]; then
        echo "Loading LaunchAgent: $plist"
        launchctl unload "$plist" || true
        launchctl load -w "$plist"
    fi
}

# Try system-wide first, then user-specific
load_plist "$SYS_PLIST"
load_plist "$USER_PLIST"